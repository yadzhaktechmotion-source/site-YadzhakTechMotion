{% extends "base.html" %}
{% load i18n %}

{% block content %}
<div class="pdf-view-container">

  <div class="d-flex justify-content-between align-items-center w-100 mb-3 pdf-top-bar">
    <div class="d-flex align-items-center gap-2">
      <a href="javascript:history.back()" class="btn btn-back btn-sm">
        â† {% trans "Back" %}
      </a>

      {% if article and article.pdf %}
        <a href="{{ article.pdf.url }}" target="_blank" class="btn btn-outline-info btn-sm">
          ğŸ” {% trans "Full Screen" %}
        </a>
      {% endif %}
    </div>

    <div class="vote-buttons d-flex align-items-center gap-2">
      {% if article %}
        <button class="vote-btn btn-outline-success btn-sm"
                data-id="{{ article.id }}" data-action="like">
          ğŸ‘ <span>{{ article.likes }}</span>
        </button>
        <button class="vote-btn btn-outline-danger btn-sm"
                data-id="{{ article.id }}" data-action="dislike">
          ğŸ‘ <span>{{ article.dislikes }}</span>
        </button>
      {% endif %}
    </div>
  </div>

  <div class="pdf-wrapper">

    {# ğŸ”’ PRO SUBSCRIPTION CTA #}
    {% if pro_required %}
      <div class="alert alert-warning text-center m-0">
        <strong>{% trans "This is a PRO article." %}</strong><br>
        {% trans "Please subscribe to access this content." %}

        <div class="mt-3">
          {% if user.is_authenticated %}
            <a class="btn btn-success btn-sm"
               href="{% url 'subscription_checkout' %}">
              ğŸš€ {% trans "Go PRO" %}
            </a>
          {% else %}
            <a class="btn btn-primary btn-sm"
               href="{% url 'login' %}?login=1">
              ğŸ” {% trans "Login" %}
            </a>
          {% endif %}
        </div>
      </div>

    {% elif article and article.pdf %}
      <iframe src="{{ article.pdf.url }}"
              class="pdf-frame"
              title="{{ article.title }}"></iframe>

      {% if settings_obj and settings_obj.logo %}
        <div class="pdf-watermark">
          <img src="{{ settings_obj.logo.url }}" alt="logo">
        </div>
      {% endif %}

    {% else %}
      <div class="alert alert-warning text-center m-0">
        {% trans "PDF file not available." %}
      </div>
    {% endif %}

  </div>
</div>
{% endblock %}
